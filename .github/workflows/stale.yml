name: Stale Issues and PRs

on:
  schedule:
    # Run daily at 1:00 AM UTC
    - cron: '0 1 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest

    steps:
    - name: Stale Issues and PRs
      uses: actions/stale@v10
      with:
        # Stale issues config
        days-before-issue-stale: 60
        days-before-issue-close: 14
        stale-issue-label: 'stale'
        stale-issue-message: |
          This issue has been automatically marked as stale because it has not had
          recent activity. It will be closed in 14 days if no further activity occurs.
          Thank you for your contributions.
        close-issue-message: |
          This issue was automatically closed because it has been stale for 14 days
          with no activity. Feel free to reopen if this is still relevant.

        # Stale PRs config
        days-before-pr-stale: 30
        days-before-pr-close: 7
        stale-pr-label: 'stale'
        stale-pr-message: |
          This pull request has been automatically marked as stale because it has not had
          recent activity. It will be closed in 7 days if no further activity occurs.
          Thank you for your contributions.
        close-pr-message: |
          This pull request was automatically closed because it has been stale for 7 days
          with no activity. Feel free to reopen if you plan to continue working on this.

        # Labels to exempt from stale marking
        exempt-issue-labels: 'pinned,security,roadmap,help-wanted,good-first-issue'
        exempt-pr-labels: 'pinned,security,work-in-progress'

        # Don't mark issues/PRs stale if they have these labels
        exempt-all-milestones: true

        # Operations per run (to avoid API rate limits)
        operations-per-run: 100

        # Remove stale label when updated
        remove-stale-when-updated: true
